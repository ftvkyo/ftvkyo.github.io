<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=mask-icon href=/favicon.svg color=black><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Montserrat&family=Arvo&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=https://www.ftvkyo.me/scss/index.css><title>ftvkyo | Lazy keymap</title></head><body><script>0</script><header class=only-screen><nav><a class=logo href=/>Home
</a><a href=/project/>Projects
</a><a href=/post/>Posts
</a><a href=/about/>About</a></nav></header><main><h1>Lazy keymap</h1><div class=metadata><div class=description>Keymap generator. Takes some configuration in and provides a <a href=https://zmk.dev>ZMK</a> keymap config, an SVG reference card, and in the future, an <a href=https://www.x.org/wiki/XKB/>XKB</a> layout description.</div></div><ul><li>Github repository: <a href=https://github.com/ftvkyo/lazy-keymap>ftvkyo/lazy-keymap</a></li><li>Work started: <em>Dec 5, 2023</em><ul><li>Code recreated based on a previous implementation written in Python</li><li>And then again, but with a better approach to getting things done</li></ul></li></ul><div class="info skills"><span><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m6.914 2.741 15.557 15.556-4.243 4.243L2.672 6.983zm-.707-.707L4.174.0.0 4.243l1.965 2.034zm12.821 21.119L24 24l-.918-4.901zM14.461 7.459l.389-.388.707.707.707-.707-.707-.707.707-.707.707.707.708-.708-.707-.706 2.121-2.121 2.121 2.121-4.631 4.631 1.393 1.393L24 4.95 19.092.0l-6.045 6.045zm-4.949 9.193L4.95 21.213l-2.121-2.121.707-.708.707.707.707-.707-.707-.707.707-.707.707.707.707-.707-.707-.707.707-.707.707.707.707-.707-.707-.706.319-.319-1.415-1.415L0 19.092 4.95 24l5.955-5.955zm9.934-11.349a.5.5.0 10-.708-.707.5.5.0 00.708.707"/></svg>
Rust, ZMK, X Keyboard Config, SVG</span></div><figure><img src=/img/project/lazy-keymap/refcard.svg alt="Example reference card for my one of a kind Hovert60 keyboard"><figcaption><p>Example reference card for my one of a kind <a href=/post/devlog-hovert60-02/>Hovert60 keyboard</a></p></figcaption></figure><p>That refcard is generated based on 2 config files.
One of them is a config file that defines the shape and &#171;slots&#187; of the keyboard, and the other one specifies the actual mapping of the keys to those slots.</p><p>For now, what can be drawn in the SVG is quite limited, but it&rsquo;s already very useful.
Even though I have to manually assign styles and labels to keys, it&rsquo;s nice to keep a single source of truth for everything, as it reduces the chance of making mistakes.
I also really like what the SVG refcard looks like.</p><p>Here is the keymap file that was generated simultaneously with the refcard shown above:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;behaviors.dtsi&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;dt-bindings/zmk/keys.h&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;dt-bindings/zmk/bt.h&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e>/*
</span></span></span><span style=display:flex><span><span style=color:#7f848e>    This is file is
</span></span></span><span style=display:flex><span><span style=color:#7f848e>    a keymap &#34;ftvkyo&#34;
</span></span></span><span style=display:flex><span><span style=color:#7f848e>    for board &#34;hovert60&#34;.
</span></span></span><span style=display:flex><span><span style=color:#7f848e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e>#define DEFAULT 0
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define LOWER 1
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define BT0 BT_SEL 0
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define BT1 BT_SEL 1
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define BT2 BT_SEL 2
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define BTX BT_CLR
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define V_UP C_VOLUME_UP
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define V_DN C_VOLUME_DOWN
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define MUTE C_MUTE
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define MPLAY C_PLAY_PAUSE
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define MPREV C_PREVIOUS
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define MNEXT C_NEXT
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define B_UP C_BRIGHTNESS_INC
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define B_DN C_BRIGHTNESS_DEC
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>/</span> {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>keymap</span> {
</span></span><span style=display:flex><span>        <span style=color:#e06c75>compatible</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;zmk,keymap&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#e06c75>layer_0</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#7f848e>// Default
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>bindings</span> <span style=color:#56b6c2>=</span> <span style=color:#56b6c2>&lt;</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>GRAVE</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N1</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N2</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N3</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N4</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N5</span>                 <span style=color:#7f848e>/*   */</span>             <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N6</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N7</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N8</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N9</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N0</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>BSPC</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>TAB</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>Q</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>W</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>E</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>R</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>T</span>                  <span style=color:#7f848e>/*   */</span>             <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>Y</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>U</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>I</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>O</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>P</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>SQT</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LCTRL</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>A</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>S</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>D</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>G</span>                  <span style=color:#7f848e>/*   */</span>             <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>H</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>J</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>K</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>L</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>SEMI</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>RCTRL</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LSHFT</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>Z</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>X</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>C</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>V</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>B</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LBKT</span>    <span style=color:#7f848e>/*   */</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>RBKT</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>N</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>M</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>COMMA</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>DOT</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>SLASH</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>RSHFT</span>
</span></span><span style=display:flex><span>                      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>ESC</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LALT</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LMETA</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>mo</span> <span style=color:#e06c75>LOWER</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>SPACE</span>   <span style=color:#7f848e>/*   */</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>SPACE</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>RET</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LMETA</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>RALT</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>BSLH</span>
</span></span><span style=display:flex><span>            <span style=color:#56b6c2>&gt;</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#e06c75>layer_1</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#7f848e>// Lower
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>bindings</span> <span style=color:#56b6c2>=</span> <span style=color:#56b6c2>&lt;</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>PSCRN</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F1</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F2</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F3</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F4</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F5</span>                 <span style=color:#7f848e>/*   */</span>             <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F6</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F7</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F8</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F9</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F10</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>DEL</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>bt</span> <span style=color:#e06c75>BT0</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>bt</span> <span style=color:#e06c75>BT1</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>bt</span> <span style=color:#e06c75>BT2</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>bt</span> <span style=color:#e06c75>BTX</span>                <span style=color:#7f848e>/*   */</span>             <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F11</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>F12</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>MPREV</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>V_DN</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>V_UP</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>MNEXT</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>MINUS</span>              <span style=color:#7f848e>/*   */</span>             <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>EQUAL</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>LEFT</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>DOWN</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>UP</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>RIGHT</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>
</span></span><span style=display:flex><span><span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>       <span style=color:#7f848e>/*   */</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>HOME</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>PG_DN</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>PG_UP</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>END</span>    <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>
</span></span><span style=display:flex><span>                      <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>CAPS</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>       <span style=color:#7f848e>/*   */</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>MUTE</span>   <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>kp</span> <span style=color:#e06c75>MPLAY</span>  <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>trans</span>     <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>none</span>
</span></span><span style=display:flex><span>            <span style=color:#56b6c2>&gt;</span>;
</span></span><span style=display:flex><span>        };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>};
</span></span></code></pre></div></main><footer class=only-screen>© Rei</footer></body></html>
<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=mask-icon href=/favicon.svg color=black><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&family=Montserrat&family=Arvo&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=https://www.ftvkyo.me/scss/index.css><title>ftvkyo | Hovert60 keyboard devlog #1: Init</title></head><body><script>0</script><header class=only-screen><nav><a class=logo href=/>Home
</a><a href=/project/>Projects
</a><a href=/post/>Posts
</a><a href=/about/>About</a></nav></header><main><h1>Hovert60 keyboard devlog #1: Init</h1><div class=metadata><div class=description>Making a low-profile wireless split keyboard from scratch. I also intend to handwire it rather than use a PCB.</div><div class=fields><div><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2c5.514.0 10 4.486 10 10s-4.486 10-10 10S2 17.514 2 12 6.486 2 12 2m0-2C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12S18.627.0 12 0m1 12V6h-2v8h7v-2z"/></svg>
7 minutes</div><div><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20 20h-4v-4h4zm-6-10h-4v4h4zm6 0h-4v4h4zM8 16H4v4h4zm6 0h-4v4h4zm-6-6H4v4h4zm16-8v22H0V2h3v1c0 1.103.897 2 2 2s2-.897 2-2V2h10v1c0 1.103.897 2 2 2s2-.897 2-2V2zm-2 6H2v14h20zm-2-7a1 1 0 10-2 0v2a1 1 0 102 0zM6 3A1 1 0 114 3V1a1 1 0 112 0z"/></svg>
<time datetime=2024-04-10>Apr 10, 2024</time></div><a href=/tags/devlog><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m9.776 2 11.395 11.395-7.78 7.777L2 9.781V2zm.829-2H0v10.609L13.391 24 24 13.396zM7.414 7.414a2 2 0 11-2.83-2.826 2 2 0 012.83 2.826"/></svg>
Devlog
</a><a href=/tags/keyboards><svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m9.776 2 11.395 11.395-7.78 7.777L2 9.781V2zm.829-2H0v10.609L13.391 24 24 13.396zM7.414 7.414a2 2 0 11-2.83-2.826 2 2 0 012.83 2.826"/></svg>
Keyboards</a></div></div><details><summary>Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#idea>Idea</a><ul><li><a href=#inspiration>Inspiration</a></li><li><a href=#approach>Approach</a></li></ul></li><li><a href=#preparation>Preparation</a><ul><li><a href=#choosing-the-parts>Choosing the parts</a></li><li><a href=#final-list-of-parts>Final list of parts</a></li></ul></li><li><a href=#naming>Naming</a></li><li><a href=#whats-next>What&rsquo;s next</a></li></ul></nav></details><h2 id=background>Background</h2><p>I have been a mild fan of mechanical and <a href=https://deskthority.net/wiki/Ergonomic_keyboard>ergonomic</a> keyboards for a while now.
I have used <a href=https://ergodox-ez.com/>Ergodox EZ</a>, Planck EZ <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> and <a href=https://drop.com/buy/preonic-mechanical-keyboard>OLKB Preonic</a>.
Additionally, my XKB configuration is somewhat interesting.</p><figure><img src=/img/post/devlog-hovert60-01/preonic.jpg alt="OLKB Planck with &#171;ergonomic&#187; wristrests"><figcaption><p>OLKB Planck with &#171;ergonomic&#187; wristrests</p></figcaption></figure><p>You see, Russian alphabet has 33 letters, while English only has 26.
This means that on the default Russian layout more keys are used for letters, and punctuation keys are different from the US layout.</p><p>To improve the multilingual typing experience, a variant of the RU layout called <code>unipunct</code> was created by <a href=https://github.com/a13>@a13</a>.
I then modified it slightly and <a href="https://bugs.freedesktop.org/show_bug.cgi?id=107231">submitted</a> it to xkeyboard-config.
The layout moves some of the RU keys to a &#171;Layer 3&#187; so they can be accessed when a &#171;Layer 3 modifier&#187; is held.</p><p>For example, letter <code>ё</code> <em>[jɵ]</em> is kind of an extension of letter <code>о</code> <em>[o]</em>.
As <code>ё</code> is used relatively rarely (and some people even consider it <em>optional</em>), it is placed on the Layer 3 of the <code>о</code> key.
My Layer 3 modifier is Right Alt, so I can type <code>ё</code> by pressing <code>RAlt+о</code> and <code>Ё</code> by pressing <code>RAlt+Shift+о</code>.</p><details><summary>Example XKB configuration that uses the layout</summary><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/X11/xorg.conf.d/10-user-keyboard.conf
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xorg data-lang=xorg><span style=display:flex><span><span style=color:#c678dd>Section</span> <span style=color:#98c379>&#34;InputClass&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Identifier</span> <span style=color:#98c379>&#34;system-keyboard&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>MatchIsKeyboard</span> <span style=color:#98c379>&#34;on&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Option</span> <span style=color:#98c379>&#34;XkbLayout&#34; &#34;us,ru&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Option</span> <span style=color:#98c379>&#34;XkbVariant&#34; &#34;,unipunct&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Option</span> <span style=color:#98c379>&#34;XkbOptions&#34; &#34;grp:caps_toggle,lv3:ralt_switch&#34;</span>
</span></span><span style=display:flex><span><span style=color:#c678dd>EndSection</span>
</span></span></code></pre></div><p><code>lv3:ralt_switch</code> or an alternative <code>lv3:...</code> option is necessary to configure the key that will be used as the Layer 3 modifier.</p><p>Optional <code>grp:caps_toggle</code> configures language (&#171;group&#187;) switching to be done with Caps Lock.
Caps Lock can still be activated if pressed with Shift.
It can also be replaced with <code>ctrl:swapcaps,grp:lctrl_toggle</code> to make Caps Lock behave as Ctrl, and make Ctrl change the language.</p><p>Note: at the moment of writing, <code>localectl list-x11-keymap-variants ru</code> does not display the <code>unipunct</code> variant.
I might look into this at some point.</p><p>Note: the settings can also be hand-clicked in something like KDE keyboard configuration.
And they can also be used in input configuration of something like <code>sway</code> if you use Wayland.</p></details><p>I should mention that keyboard layout configuration does not end with XKB config.
It can also be configured by modifying keyboard firmware, and some use cases really benefit from configuring <strong>both</strong>.
However, this is a whole another topic which I will save for later.
I plan to write more about this as a part of my <a href=/project/lazy-keymap/>Lazy keymap</a> project.</p><p>So, considering my experience of using &#171;ergonomic&#187; keyboards and <code>ru(unipunct)</code> layout, I felt like I can improve something.
This, along with the aforementioned <code>lazy-keymap</code>, is what this devlog is about.</p><h2 id=idea>Idea</h2><p>This is the idea I started with:</p><blockquote><p>Make a keyboard tailored for me:</p><ul><li>Low-profile</li><li>Ortholinear or column-staggered <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></li><li>Ideally wireless</li><li>Ideally with a thumb cluster</li><li>Possibly split</li></ul></blockquote><p>The &#171;tailored for me&#187; part implies a few additional requirements.
They basically boil down to what keys and key combinations I want to have the quickest access to.</p><details><summary>Some accessibility criteria for keys & key combinations</summary><table><thead><tr><th>Feature</th><th>What it makes easier</th></tr></thead><tbody><tr><td>Dedicated number row</td><td>Typing numbers & symbols, using Fn-keys & number shortcuts</td></tr><tr><td><code>Caps Lock</code></td><td>Changing language</td></tr><tr><td><code>Shift</code> combos</td><td>Big letters and symbols</td></tr><tr><td><code>Ctrl [+ Shift]</code> combos</td><td>Regular application shortcuts</td></tr><tr><td><code>Super<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> [+ Shift]</code> combos</td><td>Window manager shortcuts</td></tr><tr><td><code>Right Alt [+ Shift]</code> combos</td><td>Typing in Russian</td></tr></tbody></table></details><p>With this in mind, there are only two things left to do before I can start:</p><ol><li>Find inspiration</li><li>Choose implementation approach</li></ol><h3 id=inspiration>Inspiration</h3><p>These keyboards served as my inspiration:</p><ul><li><a href=https://github.com/GEIGEIGEIST/TOTEM>TOTEM</a></li><li><a href=https://github.com/foostan/crkbd>Corne</a></li><li><a href=https://github.com/kata0510/Lily58>Lily58</a></li><li><a href=https://josefadamcik.github.io/SofleKeyboard/>Sofle</a></li></ul><p>Sofle is probably the closest to what I want to make.</p><h3 id=approach>Approach</h3><p>A keyboard can be designed in many ways that have various difficulty levels.</p><p>The approach of my choice is:</p><ul><li>Design the front plate shape in <a href=https://www.autodesk.com/products/fusion-360/personal>Autodesk Fusion</a> from scratch</li><li>Cut the front plate out of a sheet of metal using a CNC router</li><li>Solder the key switches by hand, without using a PCB</li></ul><p>To be fair, my initial idea was to cut the front plate out of wood or acrylic using a laser cutter.
However, I learned that with the thickness of material I need to use, the result would be very fragile and wobbly.
Maybe it could work if I used a PCB to hold the switches in place, but I don&rsquo;t want that.</p><p>Here are some links:</p><ul><li><a href=https://yarukizero.files.wordpress.com/2021/09/handwired-keyboard-guide.pdf>An amazing in-depth keyboard handwiring guide</a> by Ewen Cluney</li><li><a href="https://geekhack.org/index.php?topic=87689.0">Another keyboard handwiring guide with amazing photos</a> by <code>@cribbit</code></li><li><a href=https://matt3o.com/hand-wiring-a-custom-keyboard/>A multi-part handwiring guide with nice extra info</a> by Matteo Spinelli</li><li><a href=https://josefadamcik.github.io/SofleKeyboard/build_guide_choc.html>Sofle Choc build guide</a> (uses a PCB)</li></ul><p>It&rsquo;s also important to mention that there are tools that can make the design process significantly easier:</p><ul><li><a href=http://www.keyboard-layout-editor.com>Keyboard Layout Editor</a></li><li><a href=https://ergogen.xyz/>Ergogen</a> and its <a href=https://ergogen.cache.works/>unofficial deployment</a> which is &#171;better&#187; <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></li><li><a href=https://ryanis.cool/cosmos/>Cosmos</a> (no idea about this one but looks <strong>very cool</strong>)</li><li>Others not mentioned&mldr;</li></ul><p>I didn&rsquo;t use these helper tools because I was not aware about them when I started, and later Autodesk Fusion was just too fun to drop.</p><h2 id=preparation>Preparation</h2><h3 id=choosing-the-parts>Choosing the parts</h3><p>There was a number of decisions to make:</p><ol><li>What key switches to use?</li><li>What material to use for the front plate that will hold the switches locked in place?</li><li>What microcontroller and firmware to use?</li><li>How to attach the microcontroller to the board?</li></ol><h4 id=choice-of-key-switches>Choice of key switches</h4><details><summary>Decision process &ndash; keyswitches</summary><p>As the goal is to make the keyboard low-profile, the &#171;default&#187; option seems to be <a href=https://www.kailh.com/en/Products/Ks/CS/>Kailh Choc</a> switches.
It&rsquo;s important to note that there are 2 main versions of Kailh Choc switches &ndash; V1 and V2.
<strong>Kailh Choc V1 keycaps are not compatible with V2 and other switches.</strong></p><p>Another important thing is that Kailh Choc keycaps are usually spaced differently compared to more traditional Cherry MX switches & keycaps.
You can read more on Deskthority Wiki: <a href=https://deskthority.net/wiki/Kailh_PG1350_series#Keycaps>Kailh PG1350 #Keycaps</a>.
There is also a <a href=https://cdn-shop.adafruit.com/product-files/5113/CHOC+keyswitch_Kailh-CPG135001D01_C400229.pdf>datasheet</a> for them.</p><p>Key (ha!) takeaways:</p><ul><li>The cutout for the switch is <code>14×14mm</code></li><li>One unit (area taken up by a key) is <code>18×17mm</code> (compared to the more common <code>19.05×19.05mm</code>)</li><li>For the switches to click in place, the plate should ideally be <code>1.3mm</code> thick (compared to the more common <code>1.5mm</code>)</li></ul></details><p>I purchased Kailh Choc V1 Pink switches along with keycaps for them.</p><figure><img src=/img/post/devlog-hovert60-01/keyswitches.jpg alt="Kailh Choc V1 switches next to Cherry MX style switches"><figcaption><p>Kailh Choc V1 switches next to Cherry MX style switches</p></figcaption></figure><figure><img src=/img/post/devlog-hovert60-01/keycaps.jpg alt="Kailh Choc V1 keycaps"><figcaption><p>Kailh Choc V1 keycaps</p></figcaption></figure><h4 id=choice-of-front-plate-material>Choice of front plate material</h4><details><summary>Decision process &ndash; plate material</summary><p>As I mentioned previously, wood and acrylic are pretty much out of the question.</p><ol><li>Aluminium? I don&rsquo;t like how it feels in my imagination, so no.</li><li>Brass? Yes. Totally not inspired by <a href=https://www.youtube.com/@DIYPerks>DIY Perks</a>.</li></ol></details><p>I purchased 2 brass sheets with the dimensions <code>150×150×1.5mm</code>.</p><figure><img src=/img/post/devlog-hovert60-01/brass.jpg alt="Brass sheets"><figcaption><p>Brass sheets</p></figcaption></figure><h4 id=choice-of-microcontroller-and-firmware>Choice of microcontroller and firmware</h4><details><summary>Decision process &ndash; microcontroller</summary><p>As I want to build a wireless keyboard, using <a href=https://zmk.dev/>ZMK</a> for the firmware seems to be a good idea.
Looking through the list of <a href=https://zmk.dev/docs/hardware>hardware supported by ZMK</a>, I was choosing between Pro Micro and Seeed XIAO microcontroller &#171;footprints&#187;.
An important detail is that not all microcontrollers support <abbr title="Bluetooth Low Energy">BLE</abbr>, and I wanted one that does support it (so I don&rsquo;t have to charge the keyboard as often).</p><p>Note that the controller is quite small.
It actually barely has enough pins for all the keys I want to have!
Looking ahead, there are going to be 30 keys soldered in a 5x6 matrix, which means I need 11 <abbr title=Input/Output>I/O</abbr> pins.</p></details><p>In the end I selected <a href=https://wiki.seeedstudio.com/XIAO_BLE/>Seeed XIAO BLE</a> that uses an <code>nRF52840</code> chip.</p><figure><img src=/img/post/devlog-hovert60-01/microcontroller.jpg alt="Seeed XIAO BLE microcontroller"><figcaption><p>Seeed XIAO BLE microcontroller</p></figcaption></figure><h4 id=determining-how-to-attach-the-microcontrollers-to-the-boards>Determining how to attach the microcontrollers to the boards</h4><details><summary>Decision process &ndash; microcontroller attachment</summary><p>Originally I was thinking about glueing the microcontroller to the bottom board, or maybe leaving it hanging, as it doesn&rsquo;t have any mounting holes.
But I realized I can use a soldering breadboard to mount the microcontroller and connect the wires to it.</p><p>This brings additional benefits:</p><ul><li>If I use header pins for the microcontroller, it becomes swappable (in case it fails)</li><li>I can hide the battery under the breadboard</li><li>It&rsquo;s easier to fix issues during assembly</li></ul></details><figure><img src=/img/post/devlog-hovert60-01/breadboards.jpg alt=Breadboards><figcaption><p>Breadboards</p></figcaption></figure><h3 id=final-list-of-parts>Final list of parts</h3><table><thead><tr><th>Component</th><th style=text-align:right>Count</th></tr></thead><tbody><tr><td><a href=https://www.seeedstudio.com/Seeed-XIAO-BLE-nRF52840-p-5201.html>Seeed Xiao nRF52840 (BLE)</a></td><td style=text-align:right>2</td></tr><tr><td><a href="https://splitkb.com/collections/switches-and-keycaps/products/kailh-low-profile-choc-switches?variant=42309434835203">Kailh Choc Pink switches</a></td><td style=text-align:right>60</td></tr><tr><td><a href="https://splitkb.com/products/blank-mbk-choc-low-profile-keycaps?variant=31811487039565">Blank White Keycaps</a></td><td style=text-align:right>58</td></tr><tr><td><a href="https://splitkb.com/products/blank-mbk-choc-low-profile-keycaps?variant=31811519709261">Blank White Homing Keycaps</a></td><td style=text-align:right>2</td></tr><tr><td>Brass plate <code>150×150×1.5mm</code></td><td style=text-align:right>2</td></tr><tr><td><code>1N4148</code> Diodes</td><td style=text-align:right>60</td></tr><tr><td><code>250mAh</code> Battery</td><td style=text-align:right>2</td></tr><tr><td>Battery cables</td><td style=text-align:right>2</td></tr><tr><td>Breadboard</td><td style=text-align:right>2</td></tr><tr><td><code>AWG 18</code> Copper wire</td><td style=text-align:right>long</td></tr><tr><td>Heat Shrink tube</td><td style=text-align:right>long</td></tr><tr><td><code>M2</code> Standoffs & Screws</td><td style=text-align:right>many</td></tr><tr><td>Header pins and sockets</td><td style=text-align:right>many</td></tr><tr><td>Sheets of acrylic (for prototyping)</td><td style=text-align:right>few</td></tr></tbody></table><figure><img src=/img/post/devlog-hovert60-01/power.jpg alt="Battery, diodes, battery cable"><figcaption><p>Battery, diodes, battery cable</p></figcaption></figure><h2 id=naming>Naming</h2><p>The name of the project, <code>Hovert60</code> or <code>h/t60</code>, highlights several project features:</p><ul><li><code>Hover</code>: the keys are held by the front plate, there is no additional support from a PCB</li><li><code>Hover</code>: the switches have very low resistance, so typing experience will be very light</li><li><code>Overt</code>: the keyboard enclosure is open from the sides</li><li><code>Overt</code>: the development process is documented here</li><li><code>60</code>: There are 60 keys</li></ul><h2 id=whats-next>What&rsquo;s next</h2><p>I plan the following posts after this one:</p><ul><li>Design process &ndash; <a href=/post/devlog-hovert60-02/>post #2</a></li><li>Manufacture</li><li>Configuration</li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Planck EZ was <a href=https://blog.zsa.io/2307-goodbye-planck-ez/>retired in 2023</a>, but just Planck still exists&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Read about <a href=https://deskthority.net/wiki/Staggering#Columnar_layout>Staggering #Columnar layout</a> on Deskthority&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>&#171;Super&#187; is an alternative name of the &#171;Windows&#187; or &#171;Command&#187; key, also known as &#171;Meta&#187;. Read more about <a href=https://en.wikipedia.org/wiki/Super_key_(keyboard_button)>Super key</a> on Wikipedia.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://github.com/ergogen/ergogen>Github &ndash; ergogen</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></main><footer class=only-screen>© Rei</footer></body></html>
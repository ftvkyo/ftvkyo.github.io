{{ $readingTime := in .Site.Params.readingTimeSections .CurrentSection.Path }}

{{ if (or .Params.description .Params.archived $readingTime .Params.tags .Date) }}
    <div class="metadata">

        {{ if .Params.description }}
            <div class="description">
                {{ .Params.description | markdownify }}
            </div>
        {{ end }}

        {{ if (or .Params.archived $readingTime .Date .Params.tags) }}
            <div class="fields">
                {{ if .Params.archived }}
                    <div>
                        {{ partial "icon/archive.svg" . }}
                        Archived
                    </div>
                {{ end }}

                {{ if $readingTime }}
                    <div>
                        {{ partial "icon/clock.svg" . }}
                        {{ partial "reading-time" . }}
                    </div>
                {{ end }}

                {{ if .Date }}
                    {{ $dateSystem := .Date.Format "2006-01-02" }}
                    {{ $dateReadable := .Date.Format .Site.Params.dateFormat }}
                    <div>
                        {{ partial "icon/calendar.svg" . }}
                        <time datetime="{{ $dateSystem }}">
                            {{ $dateReadable }}
                        </time>
                    </div>
                {{ end }}

                {{ range .Params.tags }}
                    {{ $href := print (relLangURL "tags/") (urlize .) }}
                    <a href="{{ $href }}">
                        {{ partial "icon/tag.svg" . }}
                        {{ . }}
                    </a>
                {{ end }}
            </div>
        {{ end }}
    </div>
{{ end }}
